(function(a){a.smFilteredPagination=function(b,j){var i=new RegExp("^[0-9]+$");var d={pagerItems:"li.item",pagerItemsWrapper:"div.results",pagerClass:"pagination",pagerHeader:"pagerHeader",pagerFooter:"pagerFooter",itemsPerPage:6,itemsInPager:6,itemsInPagerEdge:2,itemsInPagerContinued:"...",showPagerHeader:true,showPagerFooter:true,showFirst:false,showPrev:true,showNext:true,showLast:false,showOnZero:false,showOnOne:false,textFirst:"First",textPrev:" < ",textNext:" > ",textLast:"Last",hiddenClass:"hide",filteredClassList:".filtered",scrollToTopOnChange:false,handleLocationHash:false,locationHashHandler:function(k){var l=location.hash.split("#")[1];if(i.test(l)){k.setCurrentPage(l)}},locationHashUpdate:function(k){location.hash=k},insertPagerHeader:function(l){var k='<div id="'+this.pagerHeader+'" class="'+this.pagerClass+'"></div>';if(a("#"+this.pagerHeader).length){a("#"+this.pagerHeader).html(k)}else{a(l).prepend(k)}},insertPagerFooter:function(l){var k='<div id="'+this.pagerFooter+'" class="'+this.pagerClass+'"></div>';if(a("#"+this.pagerFooter).length){a("#"+this.pagerFooter).html(k)}else{a(l).append(k)}}};var e=this;e.settings={};var h=function(){e.settings=a.extend({},d,j);e.el=b;e.settings.currentPage=1;e.settings.pageCount=1;e.settings.tpagerClass="."+e.settings.pagerClass;e.settings.tpagerHeader="#"+e.settings.pagerHeader;e.settings.tpagerFooter="#"+e.settings.pagerFooter;e.rebuild();e.el.find(e.settings.tpagerClass+" a").live("click",function(l){l.preventDefault();e.settings.currentPage=(e.el.find(e.settings.tpagerClass+" a.current").length)?parseInt(e.el.find(e.settings.tpagerClass+" a.current").attr("href").split("#")[1]):1;var k=a(this).attr("href").split("#")[1];e.setCurrentPage(k)});if(e.settings.handleLocationHash){if(location.hash!="#"&&location.hash!=""&&location.hash!=null){e.settings.locationHashHandler(e)}}return e.el};var f=function(l,o){var q=Math.ceil(e.settings.itemsInPager/2);var n=parseInt(o);var m=l-e.settings.itemsInPager;var p=(n>q)?Math.max(Math.min(n-q,m),1):1;var k=(n>q)?Math.min(n+q,l):Math.min(e.settings.itemsInPager,l);return[p,k]};var c=function(n,m,s){var q="";if(m>0||e.settings.showOnZero){if(m>1||e.settings.showOnOne){var k=f(m,s);if(e.settings.showFirst&&m>1){q+='<a href="#first" class="first">'+e.settings.textFirst+"</a>"}if(e.settings.showPrev&&m>1){q+='<a href="#prev" class="prev">'+e.settings.textPrev+"</a>"}if(k[0]>1&&e.settings.itemsInPagerEdge>0){var o=Math.min(e.settings.itemsInPagerEdge,k[0]);for(var p=1;p<o;p++){q+='<a href="#'+p+'">'+p+"</a>"}if(e.settings.itemsInPagerEdge<k[0]&&e.settings.itemsInPagerContinued){q+="<span>"+e.settings.itemsInPagerContinued+"</span>"}}for(var p=k[0];p<=k[1];p++){var r=(p==s)?' class="current"':"";q+='<a href="#'+p+'"'+r+">"+p+"</a>"}if(k[1]<m&&e.settings.itemsInPagerEdge>0){if(m-e.settings.itemsInPagerEdge>k[1]&&e.settings.itemsInPagerContinued){q+="<span>"+e.settings.itemsInPagerContinued+"</span>"}var l=Math.max(m-e.settings.itemsInPagerEdge,k[1])+1;for(var p=l;p<=m;p++){q+='<a href="#'+p+'">'+p+"</a>"}}if(e.settings.showNext&&m>1){q+='<a href="#next" class="next">'+e.settings.textNext+"</a>"}if(e.settings.showLast&&m>1){q+='<a href="#last" class="last">'+e.settings.textLast+"</a>"}}}a(n).html(q)};var g=function(k){var k=typeof(k)!="undefined"?k:1;e.el.find(e.settings.pagerItems,e.settings.pagerItemsWrapper).filter(e.settings.filteredClassList).addClass("hide");e.el.find(e.settings.pagerItems,e.settings.pagerItemsWrapper).not(e.settings.filteredClassList).addClass(e.settings.hiddenClass).slice(k-1,e.settings.itemsPerPage).removeClass(e.settings.hiddenClass)};e.setItemsPerPage=function(k){e.settings.itemsPerPage=parseInt(k);e.rebuild()};e.setCurrentPage=function(m){var n=e.settings.currentPage;var l=Math.ceil(e.el.find(e.settings.pagerItems,e.settings.pagerItemsWrapper).not(e.settings.filteredClassList).length/e.settings.itemsPerPage);e.el.find(e.settings.tpagerClass+" li a").removeClass("current");if(i.test(m)){m=parseInt(m);var p=(m>l)?l:m;var q=(p-1)*e.settings.itemsPerPage;var k=((p-1)*e.settings.itemsPerPage)+e.settings.itemsPerPage}else{if(m=="first"){var p=1;var q=0;var k=e.settings.itemsPerPage}else{if(m=="prev"){var p=(n<2)?1:parseInt(n)-1;var q=(p-1)*e.settings.itemsPerPage;var k=((p-1)*e.settings.itemsPerPage)+e.settings.itemsPerPage}else{if(m=="next"){var p=(n>=l)?l:parseInt(n)+1;var q=(p-1)*e.settings.itemsPerPage;var k=((p-1)*e.settings.itemsPerPage)+e.settings.itemsPerPage}else{var p=l;var q=(p-1)*e.settings.itemsPerPage;var k=((p-1)*e.settings.itemsPerPage)+e.settings.itemsPerPage}}}}e.el.find(e.settings.pagerItems,e.settings.pagerItemsWrapper).not(e.settings.filteredClassList).addClass(e.settings.hiddenClass).slice(q,k).removeClass(e.settings.hiddenClass);if(e.settings.showPagerHeader){c(e.settings.tpagerHeader,l,p)}if(e.settings.showPagerFooter){c(e.settings.tpagerFooter,l,p)}if(e.settings.scrollToTopOnChange){var o=e.el.position();a("body,html,document").scrollTop(o.top)}e.settings.currentPage=p;if(e.settings.handleLocationHash){e.settings.locationHashUpdate(p)}};e.getItemsPerPage=function(k){return e.settings.itemsPerPage};e.getCurrentPage=function(k){return e.settings.currentPage};e.getPageCount=function(){return e.settings.pageCount};e.addItems=function(k){a.post(k,function(l){e.el.children(e.settings.pagerItemsWrapper).append(l);e.rebuild()})};e.rebuild=function(){var k=Math.ceil(e.el.find(e.settings.pagerItems,e.settings.pagerItemsWrapper).not(e.settings.filteredClassList).length/e.settings.itemsPerPage);e.settings.pageCount=k;e.settings.currentPage=1;if(e.settings.showPagerHeader){e.settings.insertPagerHeader(e.el);c(e.settings.tpagerHeader,k,e.settings.currentPage)}if(e.settings.showPagerFooter){e.settings.insertPagerFooter(e.el);c(e.settings.tpagerFooter,k,e.settings.currentPage)}g(1)};h()}})(jQuery);